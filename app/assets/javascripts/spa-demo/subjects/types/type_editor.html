<div ng-show="$ctrl.authz.canQuery()">
<div>
  <div class="type-name row col-lg-12"
       ng-show="$ctrl.item.id">
    <label class="col-xs-3">Name:</label>
    <input class="col-xs-9"
           name="type-name"
           ng-model="$ctrl.item.name"
           ng-readonly="true"/>
  </div>

  <form class="type-form row" name="typeform">
    <span class="type_id id">{{$ctrl.item.id}}</span>
    <span class="invalid">{{$ctrl.item.errors.full_messages}}</span>


    <div class="type-things row col-lg-12"
         ng-show="$ctrl.item.id">
      <label class="col-xs-3">Related Things:</label>
      <ul class="type-things col-xs-9">
        <li ng-repeat="thing in $ctrl.item.things | orderBy:'name'">
          <input type="checkbox"
                 name="thing-delete"
                 ng-model="thing.toRemove"
                 value="{{thing.id}}"
                 ng-show="$ctrl.authz.canModify()">
          <div class="thing-delete glyphicon glyphicon-remove"
               ng-show="thing.toRemove"></div>
          <a data-ui-sref="things({id:thing.id})">
            <span class="id thing_id">{{thing.id}}</span>
            {{thing.name}}</a>
        </li>
      </ul>
    </div>


    <div class="linkable-things row col-lg-12"
         ng-show="$ctrl.authz.canModify() && $ctrl.linkable_things.length>0">
      <label class="col-xs-3">Assignable Things:</label>
      <div class="link-things" class="col-xs-9">
        <select name="linkable-things"
                ng-model="$ctrl.selected_linkables"
                multiple>
          <option ng-repeat="thing in $ctrl.linkable_things | orderBy:'name'"
                  value="{{thing.id}}">{{thing.name}}</option>
        </select>
      </div>
      <span class="invalid">{{$ctrl.item.errors.linkable_things}}</span>
    </div>


    <div class="type-controls"
        ng-show="$ctrl.authz.canModify() && $ctrl.linkable_things.length>0">
      <span>
        <span ng-show="$ctrl.item.id">
          <button name="type-update"
                  type="submit"
                  ng-disabled="$ctrl.selected_linkables.length==0"
                  ng-click="$ctrl.linkThings()">Link to Things</button>

          <button name="thing-typeofthing-remove"
                  type="submit"
                  ng-show="$ctrl.haveDirtyLinks()"
                  ng-click="$ctrl.removeLinks()">Remove type of thing Links</button>
        </span>
      </span>
    </div>
  </form>

</div>
